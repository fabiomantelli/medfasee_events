CREATE DATABASE EVENT;

USE EVENT;

CREATE TABLE IF NOT EXISTS EVENT (
    IDEVENT INT PRIMARY KEY AUTO_INCREMENT,
    STARTTIME TIMESTAMP(3) NOT NULL,
    ENDTIME TIMESTAMP(3) NOT NULL,
    EVENTCLASSIFICATION TINYINT
);

CREATE TABLE IF NOT EXISTS TERMINAL (
    IDTERMINAL INT PRIMARY KEY AUTO_INCREMENT,
    IDCODE SMALLINT UNSIGNED NOT NULL,
    TIMEDETECTED TIMESTAMP(3) NOT NULL,
    MINIMUMFREQUENCY DOUBLE(14,12) UNSIGNED NOT NULL,
    MAXIMUMFREQUENCY DOUBLE(14,12) UNSIGNED NOT NULL,
    TERMINALCLASSIFICATION TINYINT,
    ID_EVENT INT,

    FOREIGN KEY(ID_EVENT)
    REFERENCES EVENT(IDEVENT)
);

SHOW TABLES;

DESCRIBE EVENT;
DESCRIBE TERMINAL;

INSERT INTO EVENT VALUES(NULL, '2018-09-08 17:51:04.777','2018-09-08 17:51:04.777', NULL);
INSERT INTO TERMINAL VALUES(NULL, 14, '2018-09-08 17:51:03.777', 59.952220321392, 59.991123491021, NULL, 1);
INSERT INTO TERMINAL VALUES(NULL, 15, '2018-09-08 17:52:02.777', 59.9443, 59.8523, NULL, 1);
INSERT INTO TERMINAL VALUES(NULL, 16, '2018-09-08 17:53:04.777', 59.9943, 59.9922, NULL, 1);
INSERT INTO TERMINAL VALUES(NULL, 17, '2018-09-08 17:54:05.777', 59.9223, 59.9100, NULL, 1);

INSERT INTO EVENT VALUES(NULL, '2020-11-01 8:51:04.777', '2020-11-01 8:55:05.032', NULL);
INSERT INTO TERMINAL VALUES(NULL, 8, '2020-11-01 8:51:03.032', 59.652220321392, 60.932123491021, NULL, 2);
INSERT INTO TERMINAL VALUES(NULL, 4, '2020-11-01 8:52:02.032', 61.9443, 60.8523, NULL, 2);
INSERT INTO TERMINAL VALUES(NULL, 6, '2020-11-01 8:53:04.032', 60.9943, 60.9922, NULL, 2);
INSERT INTO TERMINAL VALUES(NULL, 13, '2020-11-01 8:54:05.032', 59.9223, 60.9100, NULL, 2);
INSERT INTO TERMINAL VALUES(NULL, 15, '2020-11-01 8:55:05.032', 59.9213, 59.3200, NULL, 2);

INSERT INTO EVENT VALUES(NULL, '2021-02-02 02:15:01', '2021-02-02 02:17:04', NULL);

SELECT IDEVENT, STARTTIME, ENDTIME, IDCODE, TIMEDETECTED, MINIMUMFREQUENCY, MAXIMUMFREQUENCY
FROM EVENT
    INNER JOIN TERMINAL
    ON IDEVENT = ID_EVENT;

+---------+-------------------------+-------------------------+--------+-------------------------+------------------+------------------+
| IDEVENT | STARTTIME               | ENDTIME                 | IDCODE | TIMEDETECTED            | MINIMUMFREQUENCY | MAXIMUMFREQUENCY |
+---------+-------------------------+-------------------------+--------+-------------------------+------------------+------------------+
|       1 | 2018-09-08 17:51:04.777 | 2018-09-08 17:51:04.777 |     14 | 2018-09-08 17:51:03.777 |  59.952220321392 |  59.991123491021 |
|       1 | 2018-09-08 17:51:04.777 | 2018-09-08 17:51:04.777 |     15 | 2018-09-08 17:52:02.777 |  59.944300000000 |  59.852300000000 |
|       1 | 2018-09-08 17:51:04.777 | 2018-09-08 17:51:04.777 |     16 | 2018-09-08 17:53:04.777 |  59.994300000000 |  59.992200000000 |
|       1 | 2018-09-08 17:51:04.777 | 2018-09-08 17:51:04.777 |     17 | 2018-09-08 17:54:05.777 |  59.922300000000 |  59.910000000000 |
|       2 | 2020-11-01 08:51:04.777 | 2020-11-01 08:55:05.032 |      8 | 2020-11-01 08:51:03.032 |  59.652220321392 |  60.932123491021 |
|       2 | 2020-11-01 08:51:04.777 | 2020-11-01 08:55:05.032 |      4 | 2020-11-01 08:52:02.032 |  61.944300000000 |  60.852300000000 |
|       2 | 2020-11-01 08:51:04.777 | 2020-11-01 08:55:05.032 |      6 | 2020-11-01 08:53:04.032 |  60.994300000000 |  60.992200000000 |
|       2 | 2020-11-01 08:51:04.777 | 2020-11-01 08:55:05.032 |     13 | 2020-11-01 08:54:05.032 |  59.922300000000 |  60.910000000000 |
|       2 | 2020-11-01 08:51:04.777 | 2020-11-01 08:55:05.032 |     15 | 2020-11-01 08:55:05.032 |  59.921300000000 |  59.320000000000 |
+---------+-------------------------+-------------------------+--------+-------------------------+------------------+------------------+

SELECT COUNT(*) AS TOTAL_TERMINAIS
FROM EVENT
    INNER JOIN TERMINAL
    ON IDEVENT = ID_EVENT
WHERE IDEVENT = 2;

+-----------------+
| TOTAL_TERMINAIS |
+-----------------+
|               5 |
+-----------------+